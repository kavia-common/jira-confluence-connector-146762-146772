{"is_source_file": true, "format": "Python", "description": "This source file defines a FastAPI router with endpoints for interacting with Confluence via a connector, including status checks, search, resource creation, OAuth login and callback flows, and resource retrieval.", "external_files": ["src.connectors.base.models", "src.connectors.confluence.impl", "src.db.config", "src.api.main"], "external_methods": ["get_db", "SearchResultItem", "CreateResult", "ConnectionStatus", "ConfluenceConnector.with_db", "_gen_csrf_state", "_sign_state", "_verify_signed_state"], "published": ["router"], "classes": [], "methods": [{"name": "str _resolve_tenant_id(request: Request, tenant_id_qs: Optional[str])", "description": "Resolves the tenant ID from request headers, query parameter, or defaults to 'default'.", "scope": "", "scopeKind": ""}, {"name": "ConnectionStatus get_status(request: Request, db=Depends(get_db), tenant_id: Optional[str] = Query(None))", "description": "Endpoint to check the connection status of the Confluence connector for a tenant.", "scope": "", "scopeKind": ""}, {"name": "List[SearchResultItem] search( request: Request, q: str = Query(\"\", description=\"Search query\"), limit: int = Query(10, ge=1, le=25), filters: Optional[str] = Query(None, description=\"Optional JSON string of filter mapping\"), tenant_id: Optional[str] = Query(None), db=Depends(get_db), )", "description": "Endpoint to search resources on Confluence with optional filters.", "scope": "", "scopeKind": ""}, {"name": "CreateResult create_resource( request: Request, payload: Dict[str, Any], tenant_id: Optional[str] = Query(None), db=Depends(get_db), )", "description": "Endpoint to create a Confluence resource with a payload.", "scope": "", "scopeKind": ""}, {"name": "oauth_login( request: Request, tenant_id: Optional[str] = Query(None), state: Optional[str] = Query(None), scopes: Optional[str] = Query(None), redirect: Optional[bool] = Query(False), db=Depends(get_db), )", "description": "Starts the OAuth login process, generating an authorization URL and optionally redirecting.", "scope": "", "scopeKind": ""}, {"name": "ConnectionStatus oauth_callback( request: Request, code: Optional[str] = Query(None), state: Optional[str] = Query(None), tenant_id: Optional[str] = Query(None), db=Depends(get_db), )", "description": "Handles OAuth callback, verifies state, and stores tokens.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_resource( request: Request, key: str, tenant_id: Optional[str] = Query(None), db=Depends(get_db) )", "description": "Fetches a Confluence resource by key or ID (stubbed).", "scope": "", "scopeKind": ""}], "calls": ["ConfluenceConnector().with_db", "json.loads", "json.dumps", "connector.connection_status", "connector.search", "connector.create", "connector.oauth_authorize_url", "connector.oauth_callback", "connector.get_resource", "_gen_csrf_state", "_sign_state", "_verify_signed_state"], "search-terms": ["confluence", "OAuth", "search", "status", "create resource", "resource key", "tenant", "connection status", "authorization URL", "callback", "connector"], "state": 2, "file_id": 27, "knowledge_revision": 285, "git_revision": "6d69aeabcce338060c60612088519b52b8b991da", "revision_history": [{"148": ""}, {"285": "6d69aeabcce338060c60612088519b52b8b991da"}], "ctags": [{"_type": "tag", "name": "_hmac", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^    import hmac as _hmac$/", "file": true, "language": "Python", "kind": "namespace", "scope": "oauth_callback", "scopeKind": "function", "nameref": "module:hmac"}, {"_type": "tag", "name": "_json", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^        import json as _json$/", "file": true, "language": "Python", "kind": "namespace", "scope": "oauth_callback", "scopeKind": "function", "nameref": "module:json"}, {"_type": "tag", "name": "_json", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^    import json as _json$/", "file": true, "language": "Python", "kind": "namespace", "scope": "oauth_login", "scopeKind": "function", "nameref": "module:json"}, {"_type": "tag", "name": "_resolve_tenant_id", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def _resolve_tenant_id(request: Request, tenant_id_qs: Optional[str]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(request: Request, tenant_id_qs: Optional[str])"}, {"_type": "tag", "name": "_vss", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^    from src.api.main import _verify_signed_state as _vss$/", "file": true, "language": "Python", "kind": "unknown", "scope": "oauth_callback", "scopeKind": "function", "nameref": "unknown:_verify_signed_state"}, {"_type": "tag", "name": "create_resource", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def create_resource($/", "language": "Python", "typeref": "typename:CreateResult", "kind": "function", "signature": "( request: Request, payload: Dict[str, Any], tenant_id: Optional[str] = Query(None), db=Depends(get_db), )"}, {"_type": "tag", "name": "get_resource", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def get_resource($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( request: Request, key: str, tenant_id: Optional[str] = Query(None), db=Depends(get_db) )"}, {"_type": "tag", "name": "get_status", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def get_status(request: Request, db=Depends(get_db), tenant_id: Optional[str] = Query(None)) -> /", "language": "Python", "typeref": "typename:ConnectionStatus", "kind": "function", "signature": "(request: Request, db=Depends(get_db), tenant_id: Optional[str] = Query(None))"}, {"_type": "tag", "name": "oauth_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def oauth_callback($/", "language": "Python", "typeref": "typename:ConnectionStatus", "kind": "function", "signature": "( request: Request, code: Optional[str] = Query(None), state: Optional[str] = Query(None), tenant_id: Optional[str] = Query(None), db=Depends(get_db), )"}, {"_type": "tag", "name": "oauth_login", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def oauth_login($/", "language": "Python", "kind": "function", "signature": "( request: Request, tenant_id: Optional[str] = Query(None), state: Optional[str] = Query(None), scopes: Optional[str] = Query(None), redirect: Optional[bool] = Query(False), db=Depends(get_db), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^router = APIRouter(prefix=\"\\/confluence\", tags=[\"Connectors\", \"Confluence\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/confluence/router.py", "pattern": "/^def search($/", "language": "Python", "typeref": "typename:List[SearchResultItem]", "kind": "function", "signature": "( request: Request, q: str = Query(\"\", description=\"Search query\"), limit: int = Query(10, ge=1, le=25), filters: Optional[str] = Query(None, description=\"Optional JSON string of filter mapping\"), tenant_id: Optional[str] = Query(None), db=Depends(get_db), )"}], "hash": "a879412cb9016cf18109cb87fafc58aa", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/connectors/confluence/router.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/confluence\", tags=[\"Connectors\", \"Confluence\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}