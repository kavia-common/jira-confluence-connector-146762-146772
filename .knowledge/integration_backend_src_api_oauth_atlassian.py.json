{"is_source_file": true, "format": "Python", "description": "This file defines FastAPI routes for Atlassian OAuth 2.0 (3LO) flow with PKCE, managing login, callback, token refresh, and resource listing. It handles OAuth process coordination, session management via cookies, and API interactions with Atlassian endpoints.", "external_files": ["./oauth_pkce", "./oauth_settings"], "external_methods": ["generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "get_session", "save_tokens", "get_atlassian_oauth_config", "get_default_scopes"], "published": ["router", "atlassian_login", "atlassian_callback", "atlassian_refresh", "list_accessible_resources"], "classes": [], "methods": [{"name": "None _set_session_cookie(resp: Response, session_id: str)", "description": "Sets the HTTP-only, Secure, SameSite cookie 'sid' with session ID to the response.", "scope": "", "scopeKind": ""}, {"name": "atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = None)", "description": "Initiates Atlassian OAuth with PKCE, generating PKCE parameters, saving session, and redirecting to Atlassian authorization endpoint.", "scope": "", "scopeKind": ""}, {"name": "atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] = None)", "description": "Handles OAuth callback, validates state, exchanges code for tokens, saves tokens in session, and redirects user to frontend or post-redirect URL.", "scope": "", "scopeKind": ""}, {"name": "atlassian_refresh(request: Request)", "description": "Uses stored refresh_token to obtain new access_token and updates session.", "scope": "", "scopeKind": ""}, {"name": "list_accessible_resources(request: Request)", "description": "Uses access_token to call Atlassian API and list accessible cloud resources.", "scope": "", "scopeKind": ""}], "calls": ["get_atlassian_oauth_config()", "get_default_scopes()", "generate_code_verifier()", "generate_code_challenge()", "generate_state()", "get_or_create_session_id()", "save_session()", "get_session()", "save_tokens()", "httpx.AsyncClient()", "client.post()", "client.get()", "urllib.parse.urlencode()", "urllib.parse.quote_plus()", "urllib.parse.unquote_plus()"], "search-terms": ["Atlassian OAuth", "PKCE flow", "OAuth callback", "session cookie management", "refresh token", "list accessible resources", "FastAPI OAuth endpoints", "OAuth PKCE utilities"], "state": 2, "file_id": 15, "knowledge_revision": 64, "git_revision": "837fa352878d17e969ace40bf39f6914f4a39086", "revision_history": [{"54": ""}, {"62": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"63": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"64": "837fa352878d17e969ace40bf39f6914f4a39086"}], "ctags": [{"_type": "tag", "name": "_set_session_cookie", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^def _set_session_cookie(resp: Response, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(resp: Response, session_id: str)"}, {"_type": "tag", "name": "atlassian_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] /", "language": "Python", "kind": "function", "signature": "(request: Request, code: Optional[str] = None, state: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_login", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = /", "language": "Python", "kind": "function", "signature": "(request: Request, state: Optional[str] = None, scope: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_refresh", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_refresh(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "list_accessible_resources", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def list_accessible_resources(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "eb0548e7ebb20a267294a2987ebf246b", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/oauth_atlassian.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}