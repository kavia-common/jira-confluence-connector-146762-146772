{"is_source_file": true, "format": "Python", "description": "This file defines FastAPI routes for managing Atlassian OAuth 2.0 (specifically 3LO with PKCE). It includes endpoints for starting the login flow, handling OAuth callbacks, token refresh, and listing accessible Atlassian resources. The code manages session cookies, handles OAuth exchanges, and interacts with Atlassian APIs.", "external_files": ["./oauth_pkce", "./oauth_settings"], "external_methods": ["generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "get_session", "save_tokens", "get_atlassian_oauth_config", "get_default_scopes"], "published": ["router"], "classes": [{"name": "SessionData", "description": "Represents session-related data, including OAuth state, code verifier, and token set."}], "methods": [{"name": "None _set_session_cookie(resp: Response, session_id: str)", "description": "Sets an httponly, secure, SameSite Lax session cookie with the session ID.", "scope": "", "scopeKind": ""}, {"name": "atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = None)", "description": "Initiates Atlassian OAuth with PKCE, generating state and code verifier, and redirects user to Atlassian authorization endpoint.", "scope": "", "scopeKind": ""}, {"name": "atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] = None)", "description": "Handles OAuth callback, validates state, exchanges code for tokens, and stores tokens in session.", "scope": "", "scopeKind": ""}, {"name": "atlassian_refresh(request: Request)", "description": "Refreshes OAuth access token using stored refresh token, returning token expiry info.", "scope": "", "scopeKind": ""}, {"name": "list_accessible_resources(request: Request)", "description": "Uses access token from session to list accessible Atlassian cloud resources.", "scope": "", "scopeKind": ""}], "calls": ["get_atlassian_oauth_config", "get_default_scopes", "generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "get_session", "save_tokens", "httpx.AsyncClient.post", "httpx.AsyncClient.get"], "search-terms": ["Atlassian OAuth", "PKCE", "session management", "OAuth callback", "token refresh", "accessible resources", "/api/oauth/atlassian/login", "/api/oauth/callback/atlassian", "/api/oauth/atlassian/refresh"], "state": 2, "file_id": 15, "knowledge_revision": 54, "git_revision": "", "ctags": [{"_type": "tag", "name": "_set_session_cookie", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^def _set_session_cookie(resp: Response, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(resp: Response, session_id: str)"}, {"_type": "tag", "name": "atlassian_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] /", "language": "Python", "kind": "function", "signature": "(request: Request, code: Optional[str] = None, state: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_login", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = /", "language": "Python", "kind": "function", "signature": "(request: Request, state: Optional[str] = None, scope: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_refresh", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_refresh(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "list_accessible_resources", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def list_accessible_resources(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "792db5f00015108fee1fd72da92496b4", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/oauth_atlassian.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"54": ""}]}