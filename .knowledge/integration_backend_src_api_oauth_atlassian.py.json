{"is_source_file": true, "format": "Python", "description": "This file defines FastAPI route handlers for managing Atlassian OAuth 2.0 authentication flows, including PKCE, legacy flows, token refresh, resource listing, and configuration diagnostics. It handles OAuth initiation, callback handling, token exchange, session management, and route listing, primarily for Atlassian Jira and Confluence integrations.", "external_files": ["./oauth_pkce", "./oauth_settings", "./oauth_config", "fastapi", "httpx"], "external_methods": ["generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "get_session", "save_tokens", "get_atlassian_oauth_config", "get_default_scopes", "get_jira_oauth_config", "get_frontend_base_url_default"], "published": ["/auth/jira", "/api/auth/jira/login", "/api/oauth/atlassian/login", "/auth/jira/login", "/api/oauth/start", "/routes", "/api/oauth/callback/atlassian", "/api/oauth/atlassian/refresh", "/api/atlassian/resources", "/auth/jira/callback", "/api/config"], "classes": [], "methods": [{"name": "jira_get_oauth_url(state: Optional[str] = None, scope: Optional[str] = None)", "description": "Returns the Atlassian authorization URL as JSON, including scope, state, and redirect URI.", "scope": "", "scopeKind": ""}, {"name": "jira_login_alias(request: Request, state: Optional[str] = None, scope: Optional[str] = None, return_url: Optional[str] = None)", "description": "Redirects to the primary Jira OAuth login endpoint, preserving query parameters.", "scope": "", "scopeKind": ""}, {"name": "None _set_session_cookie(resp: Response, session_id: str)", "description": "Sets a session cookie with Secure, HttpOnly, SameSite attributes.", "scope": "", "scopeKind": ""}, {"name": "atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = None, return_url: Optional[str] = None)", "description": "Initiates Atlassian OAuth 2.0 flow with PKCE, generating code verifier, challenge, and state, then redirects to Atlassian authorization endpoint.", "scope": "", "scopeKind": ""}, {"name": "jira_login_legacy(state: Optional[str] = None, scope: Optional[str] = None)", "description": "Begins legacy Jira OAuth 2.0 flow using client_secret (non-PKCE), redirecting to Atlassian.", "scope": "", "scopeKind": ""}, {"name": "oauth_start(request: Request)", "description": "Shim endpoint for legacy clients, redirecting to /api/oauth/atlassian/login with optional return URL.", "scope": "", "scopeKind": ""}, {"name": "list_routes(request: Request)", "description": "Lists all registered routes for diagnostics.", "scope": "", "scopeKind": ""}, {"name": "atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] = None)", "description": "Completes OAuth callback by exchanging code for tokens, validating state, and redirecting to frontend with success status.", "scope": "", "scopeKind": ""}, {"name": "atlassian_refresh(request: Request)", "description": "Uses stored refresh_token to obtain a new access_token and updates session.", "scope": "", "scopeKind": ""}, {"name": "list_accessible_resources(request: Request)", "description": "Queries Atlassian API for accessible cloud resources using the stored access_token.", "scope": "", "scopeKind": ""}, {"name": "jira_callback_legacy(request: Request, code: Optional[str] = None, state: Optional[str] = None)", "description": "Handles legacy Jira OAuth non-PKCE callback, exchanges code for tokens, and redirects to frontend.", "scope": "", "scopeKind": ""}, {"name": "get_effective_config()", "description": "Returns current configuration parameters and environment settings for diagnostics.", "scope": "", "scopeKind": ""}], "calls": ["get_atlassian_oauth_config", "get_default_scopes", "get_jira_oauth_config", "get_frontend_base_url_default", "generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "get_session", "save_tokens", "httpx.AsyncClient", "urllib.parse.urlencode", "urllib.parse.quote_plus"], "search-terms": ["OAuth", "PKCE", "Atlassian", "Jira", "OAuth callback", "token refresh", "session management", "OAuth URL", "legacy OAuth", "configuration"], "state": 2, "file_id": 15, "knowledge_revision": 244, "git_revision": "16ede0da1cb5d681c89b4c436fa9519fb6fce853", "revision_history": [{"54": ""}, {"62": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"63": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"64": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"71": "c93612d2bfe887131d75d6aa4e2e91677266f41a"}, {"72": "c93612d2bfe887131d75d6aa4e2e91677266f41a"}, {"82": "e8e3b6b27369df561751d9f3714fa96ba8473925"}, {"91": "bfdff7245da8e6ccd5a638f7c0975df5e7722a10"}, {"92": "bfdff7245da8e6ccd5a638f7c0975df5e7722a10"}, {"99": "a49d74ce2b4dbb9d625dc75710bb24953cac1b24"}, {"100": "a49d74ce2b4dbb9d625dc75710bb24953cac1b24"}, {"103": "31c224f85b3a8ac8246306807a1e22e3a731efd7"}, {"104": "31c224f85b3a8ac8246306807a1e22e3a731efd7"}, {"105": "31c224f85b3a8ac8246306807a1e22e3a731efd7"}, {"107": "d230454ff52a62b345d74cd3be8a262a941138ad"}, {"108": "d230454ff52a62b345d74cd3be8a262a941138ad"}, {"109": "d230454ff52a62b345d74cd3be8a262a941138ad"}, {"111": "1b779cd35659f812309db714f51620af13446bdc"}, {"113": "90e97a63167182db3ea159c656a00318a81f1cb2"}, {"174": "7b7d55cc7c9f099a68328a94239099973fb01ef4"}, {"189": "56fe4bfe23393285f6c027815fe884f9d25c3ab3"}, {"243": "16ede0da1cb5d681c89b4c436fa9519fb6fce853"}, {"244": "16ede0da1cb5d681c89b4c436fa9519fb6fce853"}], "ctags": [{"_type": "tag", "name": "_set_session_cookie", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^def _set_session_cookie(resp: Response, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(resp: Response, session_id: str)"}, {"_type": "tag", "name": "atlassian_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] /", "language": "Python", "kind": "function", "signature": "(request: Request, code: Optional[str] = None, state: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_login", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = /", "language": "Python", "kind": "function", "signature": "(request: Request, state: Optional[str] = None, scope: Optional[str] = None, return_url: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_refresh", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_refresh(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "get_effective_config", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def get_effective_config():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "jira_callback_legacy", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def jira_callback_legacy(request: Request, code: Optional[str] = None, state: Optional[str/", "language": "Python", "kind": "function", "signature": "(request: Request, code: Optional[str] = None, state: Optional[str] = None)"}, {"_type": "tag", "name": "jira_get_oauth_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def jira_get_oauth_url(state: Optional[str] = None, scope: Optional[str] = None):$/", "language": "Python", "kind": "function", "signature": "(state: Optional[str] = None, scope: Optional[str] = None)"}, {"_type": "tag", "name": "jira_login_alias", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def jira_login_alias(request: Request, state: Optional[str] = None, scope: Optional[str] =/", "language": "Python", "kind": "function", "signature": "(request: Request, state: Optional[str] = None, scope: Optional[str] = None, return_url: Optional[str] = None)"}, {"_type": "tag", "name": "jira_login_legacy", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def jira_login_legacy(state: Optional[str] = None, scope: Optional[str] = None):$/", "language": "Python", "kind": "function", "signature": "(state: Optional[str] = None, scope: Optional[str] = None)"}, {"_type": "tag", "name": "list_accessible_resources", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def list_accessible_resources(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "list_routes", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def list_routes(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "oauth_start", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def oauth_start(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "e1b0e7b5aa4c191a415afe6ba4e60873", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/oauth_atlassian.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}