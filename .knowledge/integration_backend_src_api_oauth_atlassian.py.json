{"is_source_file": true, "format": "Python", "description": "This source file implements FastAPI routes for managing Atlassian OAuth 2.0 (3LO) with PKCE, including login initiation, callback handling, token refresh, resource listing, and configuration diagnostics. It provides endpoints for OAuth flow, session management, and diagnostic route listing.", "external_files": ["./oauth_pkce", "./oauth_settings"], "external_methods": ["generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "get_session", "save_tokens", "get_atlassian_oauth_config", "get_default_scopes"], "published": ["/api/oauth/atlassian/login", "/api/oauth/callback/atlassian", "/api/oauth/atlassian/refresh", "/api/atlassian/resources", "/api/oauth/start", "/routes", "/api/config"], "classes": [], "methods": [{"name": "atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = None)", "description": "Initiates OAuth login process by generating PKCE parameters, session storage, and redirecting to Atlassian authorization URL.", "scope": "", "scopeKind": ""}, {"name": "oauth_start(request: Request)", "description": "Legacy redirect shim to initiate login with URL redirect preservation.", "scope": "", "scopeKind": ""}, {"name": "list_routes(request: Request)", "description": "Lists all registered routes and methods in the FastAPI application for diagnostics.", "scope": "", "scopeKind": ""}, {"name": "atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] = None)", "description": "Handles OAuth callback, validates state, exchanges code for tokens, and redirects to frontend.", "scope": "", "scopeKind": ""}, {"name": "atlassian_refresh(request: Request)", "description": "Uses stored refresh_token to obtain new access_token and updates session.", "scope": "", "scopeKind": ""}, {"name": "list_accessible_resources(request: Request)", "description": "Fetches accessible resources from Atlassian API using session access_token.", "scope": "", "scopeKind": ""}, {"name": "get_effective_config()", "description": "Returns environment-derived configuration info for diagnostics.", "scope": "", "scopeKind": ""}, {"name": "None _set_session_cookie(resp: Response, session_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_atlassian_oauth_config", "get_default_scopes", "get_session", "save_session", "save_tokens", "httpx.AsyncClient.post", "httpx.AsyncClient.get"], "search-terms": ["Atlassian OAuth", "PKCE", "OAuth callback", "token refresh", "list resources", "session management", "FastAPI routes", "OAuth configuration"], "state": 2, "file_id": 15, "knowledge_revision": 105, "git_revision": "31c224f85b3a8ac8246306807a1e22e3a731efd7", "revision_history": [{"54": ""}, {"62": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"63": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"64": "837fa352878d17e969ace40bf39f6914f4a39086"}, {"71": "c93612d2bfe887131d75d6aa4e2e91677266f41a"}, {"72": "c93612d2bfe887131d75d6aa4e2e91677266f41a"}, {"82": "e8e3b6b27369df561751d9f3714fa96ba8473925"}, {"91": "bfdff7245da8e6ccd5a638f7c0975df5e7722a10"}, {"92": "bfdff7245da8e6ccd5a638f7c0975df5e7722a10"}, {"99": "a49d74ce2b4dbb9d625dc75710bb24953cac1b24"}, {"100": "a49d74ce2b4dbb9d625dc75710bb24953cac1b24"}, {"103": "31c224f85b3a8ac8246306807a1e22e3a731efd7"}, {"104": "31c224f85b3a8ac8246306807a1e22e3a731efd7"}, {"105": "31c224f85b3a8ac8246306807a1e22e3a731efd7"}], "ctags": [{"_type": "tag", "name": "_set_session_cookie", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^def _set_session_cookie(resp: Response, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(resp: Response, session_id: str)"}, {"_type": "tag", "name": "atlassian_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] /", "language": "Python", "kind": "function", "signature": "(request: Request, code: Optional[str] = None, state: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_login", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_login(request: Request, state: Optional[str] = None, scope: Optional[str] = /", "language": "Python", "kind": "function", "signature": "(request: Request, state: Optional[str] = None, scope: Optional[str] = None)"}, {"_type": "tag", "name": "atlassian_refresh", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def atlassian_refresh(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "get_effective_config", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def get_effective_config():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_accessible_resources", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def list_accessible_resources(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "list_routes", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def list_routes(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "oauth_start", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^async def oauth_start(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_atlassian.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "07bcdd0feb69b61765f7c462995bbc9e", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/oauth_atlassian.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}