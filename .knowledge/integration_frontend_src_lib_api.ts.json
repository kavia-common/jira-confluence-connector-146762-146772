{"is_source_file": true, "format": "TypeScript", "description": "This file provides a helper function 'apiFetch' for making HTTP requests with automatic inclusion of credentials and CSRF protection. It wraps around the native fetch API to streamline authenticated API calls with security features.", "external_files": ["/api/auth/csrf"], "external_methods": ["fetch"], "published": ["apiFetch"], "classes": [], "methods": [{"name": "export async function apiFetch(input: RequestInfo, init: RequestInit = {}) { apiFetch", "description": "A wrapper function around fetch that includes credentials, adds CSRF token automatically for state-changing requests, and sets appropriate headers.", "scope": "", "scopeKind": ""}], "calls": ["fetch('/api/auth/csrf', { credentials: 'include' })", "fetch(input, reqInit)"], "search-terms": ["apiFetch", "CSRF", "fetch wrapper", "HTTP request", "fetch API", "credentials", "X-CSRF-Token"], "state": 2, "file_id": 47, "knowledge_revision": 374, "git_revision": "", "ctags": [{"_type": "tag", "name": "apiFetch", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^export async function apiFetch(input: RequestInfo, init: RequestInit = {}) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "csrfRes", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^      const csrfRes = await fetch('\\/api\\/auth\\/csrf', { credentials: 'include' });$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "csrf_token", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^      const { csrf_token } = await csrfRes.json();$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^  const headers = new Headers(init.headers as HeadersInit);$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^    const message = data?.message || res.statusText || 'Request failed';$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^  const method = (init.method || 'GET').toUpperCase();$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(input, reqInit);$/", "language": "TypeScript", "kind": "constant", "scope": "apiFetch", "scopeKind": "function"}], "hash": "2d7e6ccdacf23a20df4738884514c426", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_frontend/src/lib/api.ts", "revision_history": [{"374": ""}]}