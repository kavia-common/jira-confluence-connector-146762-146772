{"is_source_file": true, "format": "Python", "description": "Test file for OAuth Jira endpoints using FastAPI and pytest, testing login and callback flows including environment setup, cookies, and mocking external calls.", "external_files": ["src/api/main", "src/connectors/jira/impl"], "external_methods": ["src.connectors.jira.impl.JiraConnector.oauth_callback"], "published": [], "classes": [], "methods": [{"name": "env(monkeypatch)", "description": "Pytest fixture that sets environment variables for OAuth client ID, secret, and redirect URI.", "scope": "", "scopeKind": ""}, {"name": "test_login_returns_authorize_url_json_and_sets_cookie()", "description": "Tests the login endpoint for correct URL, status code, and cookie setting.", "scope": "", "scopeKind": ""}, {"name": "test_callback_422_when_missing_state()", "description": "Tests callback endpoint returns 422 when state parameter is missing.", "scope": "", "scopeKind": ""}, {"name": "test_callback_redirects_when_state_cookie_matches(monkeypatch)", "description": "Tests callback endpoint redirects properly when state cookie matches, using mocking to bypass external OAuth callback call.", "scope": "", "scopeKind": ""}, {"name": "fake_oauth_callback(self, code: str, tenant_id: str, state: str)", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "description": "unavailable"}], "calls": ["fastapi.testclient.TestClient", "src.api.main.app", "src.connectors.jira.impl.JiraConnector.oauth_callback"], "search-terms": ["pytest", "OAuth", "Jira", "callback", "login", "test_client", "mock", "session cookie"], "state": 2, "file_id": 54, "knowledge_revision": 427, "git_revision": "ded04ad11f995fc3d08d55ef1781481c992d12ba", "revision_history": [{"424": ""}, {"427": "ded04ad11f995fc3d08d55ef1781481c992d12ba"}], "ctags": [{"_type": "tag", "name": "_json", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    import json as _json$/", "file": true, "language": "Python", "kind": "namespace", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "nameref": "module:json"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def env(monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch)"}, {"_type": "tag", "name": "fake_oauth_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    def fake_oauth_callback(self, code: str, tenant_id: str, state: str):$/", "file": true, "language": "Python", "kind": "function", "signature": "(self, code: str, tenant_id: str, state: str)", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function"}, {"_type": "tag", "name": "ji", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    from src.connectors.jira import impl as ji$/", "file": true, "language": "Python", "kind": "unknown", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "nameref": "unknown:impl"}, {"_type": "tag", "name": "test_callback_422_when_missing_state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def test_callback_422_when_missing_state():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_callback_redirects_when_state_cookie_matches", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def test_callback_redirects_when_state_cookie_matches(monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch)"}, {"_type": "tag", "name": "test_login_returns_authorize_url_json_and_sets_cookie", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def test_login_returns_authorize_url_json_and_sets_cookie():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "1fd865258d0ea1287e5c3771bb004e5d", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/tests/test_oauth_jira_endpoints.py"}