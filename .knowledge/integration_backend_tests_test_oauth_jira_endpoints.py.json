{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the OAuth login and callback endpoints of a Jira connector API, using pytest and FastAPI's TestClient.", "external_files": ["src.api.main", "src.api.jira_oauth", "src.connectors.jira.impl"], "external_methods": ["pytest.fixture", "pytest.setenv", "TestClient", "app (FastAPI instance)", "client.get", "r.status_code", "r.json", "r.cookies", "monkeypatch.setenv", "monkeypatch.setattr"], "published": [], "classes": [], "methods": [{"name": "env(monkeypatch)", "description": "Pytest fixture to set environment variables for Jira OAuth configuration.", "scope": "", "scopeKind": ""}, {"name": "test_login_returns_authorize_url_json_and_sets_cookie()", "description": "Tests the /auth/jira/login endpoint for correct URL return and cookie setting.", "scope": "", "scopeKind": ""}, {"name": "test_callback_422_when_missing_state()", "description": "Tests that the callback endpoint returns 422 when 'state' parameter is missing.", "scope": "", "scopeKind": ""}, {"name": "test_callback_redirects_when_state_cookie_matches(monkeypatch)", "description": "Tests the OAuth callback endpoint for successful redirection when state matches, mocking external call.", "scope": "", "scopeKind": ""}, {"name": "fake_oauth_callback(self, code: str, tenant_id: str, state: str)", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "description": "unavailable"}], "calls": ["monkeypatch.setenv", "TestClient(app)", "client.get", "r.status_code", "r.json", "r.cookies", "monkeypatch.setattr", "src.api.jira_oauth.oauth_callback"], "search-terms": ["test_oauth_jira_endpoints", "pytest", "FastAPI", "OAuth", "JiraConnector", "callback", "login", "cookie", "authorize_url"], "state": 2, "file_id": 54, "knowledge_revision": 424, "git_revision": "", "ctags": [{"_type": "tag", "name": "_json", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    import json as _json$/", "file": true, "language": "Python", "kind": "namespace", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "nameref": "module:json"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def env(monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch)"}, {"_type": "tag", "name": "fake_oauth_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    def fake_oauth_callback(self, code: str, tenant_id: str, state: str):$/", "file": true, "language": "Python", "kind": "function", "signature": "(self, code: str, tenant_id: str, state: str)", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function"}, {"_type": "tag", "name": "ji", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    from src.connectors.jira import impl as ji$/", "file": true, "language": "Python", "kind": "unknown", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "nameref": "unknown:impl"}, {"_type": "tag", "name": "jo", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^    from src.api import jira_oauth as jo$/", "file": true, "language": "Python", "kind": "unknown", "scope": "test_callback_redirects_when_state_cookie_matches", "scopeKind": "function", "nameref": "unknown:jira_oauth"}, {"_type": "tag", "name": "test_callback_422_when_missing_state", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def test_callback_422_when_missing_state():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_callback_redirects_when_state_cookie_matches", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def test_callback_redirects_when_state_cookie_matches(monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch)"}, {"_type": "tag", "name": "test_login_returns_authorize_url_json_and_sets_cookie", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/tests/test_oauth_jira_endpoints.py", "pattern": "/^def test_login_returns_authorize_url_json_and_sets_cookie():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "8ebd3a1a0b84dc3993a4791b2547ce0e", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/tests/test_oauth_jira_endpoints.py", "revision_history": [{"424": ""}]}