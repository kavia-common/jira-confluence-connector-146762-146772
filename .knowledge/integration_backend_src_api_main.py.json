{"is_source_file": true, "format": "Python", "description": "This source file defines a FastAPI application that implements an API for integrating JIRA and Confluence. It includes endpoints for health checks, user management, authentication stub, as well as integration endpoints such as connecting to JIRA/Confluence, fetching projects/pages, and managing related entities like JIRA projects and Confluence pages. The file references models, schemas, and service functions from other modules, and contains route definitions with associated logic.", "external_files": ["src/db/config", "src/db/service", "src/api/schemas", "src/api/integrations_config"], "external_methods": ["create_user", "list_users", "get_user_by_id", "upsert_jira_project", "list_jira_projects_for_user", "upsert_confluence_page", "list_confluence_pages_for_user", "get_jira_credentials"], "published": ["app", "_ocean_response", "health_check", "issue_token", "get_current_user", "create_user_endpoint", "list_users_endpoint", "get_user_endpoint", "connect_jira", "connect_confluence", "fetch_jira_projects", "fetch_confluence_pages", "upsert_jira_project_endpoint", "list_jira_projects_endpoint", "upsert_confluence_page_endpoint", "list_confluence_pages_endpoint"], "classes": [], "methods": [{"name": "Dict[str,Any] _ocean_response(data: Any, message: str = \"ok\")", "description": "Wraps API responses in a consistent envelope including status, message, and data.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Endpoint to verify the API is up and running.", "scope": "", "scopeKind": ""}, {"name": "issue_token(payload: UserCreate, db=Depends(get_db))", "description": "Creates a demo auth token for a user based on provided user details.", "scope": "", "scopeKind": ""}, {"name": "get_current_user( authorization: Optional[str] = Header(default=None), db=Depends(get_db), )", "description": "Dependency function to resolve the current user from a bearer token in headers.", "scope": "", "scopeKind": ""}, {"name": "create_user_endpoint(payload: UserCreate, db=Depends(get_db))", "description": "Creates or retrieves a user based on provided data, returning user info.", "scope": "", "scopeKind": ""}, {"name": "list_users_endpoint(db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Lists all users, requires authentication.", "scope": "", "scopeKind": ""}, {"name": "get_user_endpoint(user_id: int, db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Retrieves a specific user by ID.", "scope": "", "scopeKind": ""}, {"name": "connect_jira(db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Stores hard-coded JIRA credentials for the current user, simulating connection.", "scope": "", "scopeKind": ""}, {"name": "connect_confluence(payload: ConnectRequest, db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Stores Confluence connection details for the current user.", "scope": "", "scopeKind": ""}, {"name": "fetch_jira_projects(db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Placeholder to fetch JIRA projects, returns stored projects for current user.", "scope": "", "scopeKind": ""}, {"name": "fetch_confluence_pages(db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Placeholder to fetch Confluence pages, returns stored pages for current user.", "scope": "", "scopeKind": ""}, {"name": "upsert_jira_project_endpoint(payload: JiraProjectCreate, db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Creates or updates a JIRA project record.", "scope": "", "scopeKind": ""}, {"name": "list_jira_projects_endpoint(owner_id: int, db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Lists all JIRA projects for a given owner.", "scope": "", "scopeKind": ""}, {"name": "upsert_confluence_page_endpoint(payload: ConfluencePageCreate, db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Creates or updates a Confluence page record.", "scope": "", "scopeKind": ""}, {"name": "list_confluence_pages_endpoint(owner_id: int, db=Depends(get_db), current_user=Depends(get_current_user))", "description": "Lists all Confluence pages for a given owner.", "scope": "", "scopeKind": ""}], "calls": ["Base.metadata.create_all", "create_user", "list_users", "get_user_by_id", "upsert_jira_project", "list_jira_projects_for_user", "upsert_confluence_page", "list_confluence_pages_for_user", "get_jira_credentials"], "search-terms": ["FastAPI", "Jira-Confluence API", "integration_backend", "connect_jira", "connect_confluence", "fetch_jira_projects", "fetch_confluence_pages", "upsert_jira_project", "list_users", "health_check"], "state": 2, "file_id": 1, "knowledge_revision": 30, "git_revision": "28dac5a32d269d73eee9c3668810d8ab5eec8ee9", "revision_history": [{"7": "3ddbecfdaea73dec9c7dc9e5f607ebdc11919216"}, {"18": "3ddbecfdaea73dec9c7dc9e5f607ebdc11919216"}, {"22": "5e41eb50619ad398f0acd99dcd0f280e619e1f8c"}, {"24": "5e41eb50619ad398f0acd99dcd0f280e619e1f8c"}, {"30": "28dac5a32d269d73eee9c3668810d8ab5eec8ee9"}], "ctags": [{"_type": "tag", "name": "_ocean_response", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def _ocean_response(data: Any, message: str = \"ok\") -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(data: Any, message: str = \"ok\")"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "connect_confluence", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def connect_confluence(payload: ConnectRequest, db=Depends(get_db), current_user=Depends(get_cur/", "language": "Python", "kind": "function", "signature": "(payload: ConnectRequest, db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "connect_jira", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def connect_jira(db=Depends(get_db), current_user=Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "create_user_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def create_user_endpoint(payload: UserCreate, db=Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: UserCreate, db=Depends(get_db))"}, {"_type": "tag", "name": "fetch_confluence_pages", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def fetch_confluence_pages(db=Depends(get_db), current_user=Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "fetch_jira_projects", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def fetch_jira_projects(db=Depends(get_db), current_user=Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def get_current_user($/", "language": "Python", "kind": "function", "signature": "( authorization: Optional[str] = Header(default=None), db=Depends(get_db), )"}, {"_type": "tag", "name": "get_user_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def get_user_endpoint(user_id: int, db=Depends(get_db), current_user=Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user_id: int, db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "issue_token", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def issue_token(payload: UserCreate, db=Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: UserCreate, db=Depends(get_db))"}, {"_type": "tag", "name": "list_confluence_pages_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def list_confluence_pages_endpoint(owner_id: int, db=Depends(get_db), current_user=Depends(get_c/", "language": "Python", "kind": "function", "signature": "(owner_id: int, db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "list_jira_projects_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def list_jira_projects_endpoint(owner_id: int, db=Depends(get_db), current_user=Depends(get_curr/", "language": "Python", "kind": "function", "signature": "(owner_id: int, db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "list_users_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def list_users_endpoint(db=Depends(get_db), current_user=Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "upsert_confluence_page_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def upsert_confluence_page_endpoint(payload: ConfluencePageCreate, db=Depends(get_db), current_u/", "language": "Python", "kind": "function", "signature": "(payload: ConfluencePageCreate, db=Depends(get_db), current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "upsert_jira_project_endpoint", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def upsert_jira_project_endpoint(payload: JiraProjectCreate, db=Depends(get_db), current_user=De/", "language": "Python", "kind": "function", "signature": "(payload: JiraProjectCreate, db=Depends(get_db), current_user=Depends(get_current_user))"}], "hash": "1e2ec35293824befb950e9720a8d1f55", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}]}