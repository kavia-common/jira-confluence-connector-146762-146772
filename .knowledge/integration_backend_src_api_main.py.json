{"is_source_file": true, "format": "Python", "description": "This file is the main entry point for a FastAPI-based backend API, configuring middleware, routing, static file serving, health endpoints, and integrations for a Jira-Confluence connector project.", "external_files": ["src/db/config", "src.api.oauth_config", "src.api.routers", "src.api.jira_oauth", "src.api.auth"], "external_methods": ["get_jira_oauth_config", "build_atlassian_authorize_url", "get_active_redirect_uris_debug"], "published": ["app", "health_check", "healthz", "health_redirect_uri", "health_authorize_url_probe", "health_redirect_pieces"], "classes": [{"name": "SafeJSONFormatter", "description": "Custom logging formatter for JSON-formatted logs, including timestamp, level, message, and optional request context."}, {"name": "RequestIDMiddleware", "description": "Middleware to assign and propagate a unique request ID for each HTTP request."}], "methods": [{"name": "logging.Logger _configure_logging()", "description": "Configure and return a logger with custom JSON formatting.", "scope": "", "scopeKind": ""}, {"name": "favicon()", "description": "Serve the favicon.ico file or a fallback transparent PNG.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _ocean_response(data: Any, message: str = \"ok\")", "description": "Helper to standardize API success response with data and message.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Health check endpoint indicating the service is running.", "scope": "", "scopeKind": ""}, {"name": "healthz()", "description": "Simple readiness probe endpoint.", "scope": "", "scopeKind": ""}, {"name": "health_redirect_uri()", "description": "Returns current active redirect URIs for Jira and Confluence.", "scope": "", "scopeKind": ""}, {"name": "health_authorize_url_probe(request: Request)", "description": "Provides the OAuth authorization URL for testing configuration.", "scope": "", "scopeKind": ""}, {"name": "health_redirect_pieces(request: Request)", "description": "Returns parts of the configured redirect URI for verification.", "scope": "", "scopeKind": ""}, {"name": "dispatch(self, request: Request, call_next)", "scope": "RequestIDMiddleware", "scopeKind": "class", "description": "unavailable"}, {"name": "str format(self, record: logging.LogRecord)", "scope": "SafeJSONFormatter", "scopeKind": "class", "description": "unavailable"}], "calls": ["json.dumps", "datetime.now", "os.getenv", "os.path.abspath", "os.path.join", "os.path.isfile", "base64.b64decode", "urllib.parse.quote", "urllib.parse.urlparse", "Base.metadata.create_all", "app.include_router", "app.mount"], "search-terms": ["FastAPI", "Jira-Confluence integration", "Health check endpoints", "OAuth configuration", "Request ID middleware", "Static file serving", "Custom JSON logging"], "state": 2, "file_id": 1, "knowledge_revision": 421, "git_revision": "833b48e55677e2fc3facbe956ac284ec82d92bb2", "revision_history": [{"7": "3ddbecfdaea73dec9c7dc9e5f607ebdc11919216"}, {"18": "3ddbecfdaea73dec9c7dc9e5f607ebdc11919216"}, {"22": "5e41eb50619ad398f0acd99dcd0f280e619e1f8c"}, {"24": "5e41eb50619ad398f0acd99dcd0f280e619e1f8c"}, {"30": "28dac5a32d269d73eee9c3668810d8ab5eec8ee9"}, {"31": "7fbfd021c4802e87c6da87c524fde505c2578f38"}, {"32": "7fbfd021c4802e87c6da87c524fde505c2578f38"}, {"41": "7897077d84c2ca38be0902a71478cec76a5f5ad0"}, {"42": "7897077d84c2ca38be0902a71478cec76a5f5ad0"}, {"43": "7897077d84c2ca38be0902a71478cec76a5f5ad0"}, {"44": "7897077d84c2ca38be0902a71478cec76a5f5ad0"}, {"47": "906ba192e73f2ea439ac8fce13c4ec73b18ccf62"}, {"48": "906ba192e73f2ea439ac8fce13c4ec73b18ccf62"}, {"53": "906ba192e73f2ea439ac8fce13c4ec73b18ccf62"}, {"56": "8c69d0e627c970866f887e455b3fe92fd2ca45e7"}, {"58": "ce9dd25068e5bd76fdddef3c3666432880c7a53d"}, {"413": "833b48e55677e2fc3facbe956ac284ec82d92bb2"}, {"421": "833b48e55677e2fc3facbe956ac284ec82d92bb2"}], "ctags": [{"_type": "tag", "name": "APP_LOGGER", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^APP_LOGGER = _configure_logging()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "RequestIDMiddleware", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^class RequestIDMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SafeJSONFormatter", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^class SafeJSONFormatter(logging.Formatter):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_configure_logging", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def _configure_logging() -> logging.Logger:$/", "language": "Python", "typeref": "typename:logging.Logger", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_ocean_response", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def _ocean_response(data: Any, message: str = \"ok\") -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(data: Any, message: str = \"ok\")"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auth_router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^from src.api.auth import router as auth_router  # noqa: E402$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "configured", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^configured = os.getenv(\"NEXT_PUBLIC_BACKEND_CORS_ORIGINS\") or os.getenv(\"BACKEND_CORS_ORIGINS\") /", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "configured_list", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^configured_list = [o.strip() for o in configured.split(\",\")] if configured else [\"*\"]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "connectors_router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^from src.api.routers import connectors as connectors_router  # noqa: E402$/", "language": "Python", "kind": "unknown", "nameref": "unknown:connectors"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "RequestIDMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "favicon", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def favicon():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "format", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^    def format(self, record: logging.LogRecord) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, record: logging.LogRecord)", "scope": "SafeJSONFormatter", "scopeKind": "class"}, {"_type": "tag", "name": "health_authorize_url_probe", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def health_authorize_url_probe(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_redirect_pieces", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def health_redirect_pieces(request: Request):$/", "language": "Python", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "health_redirect_uri", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def health_redirect_uri():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "healthz", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^def healthz():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "jira_oauth_router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^from src.api.jira_oauth import router as jira_oauth_router  # noqa: E402$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "static_dir", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/main.py", "pattern": "/^static_dir = os.path.abspath(os.path.join(os.path.dirname(os.path.dirname(__file__)), \"..\", \"sta/", "language": "Python", "kind": "variable"}], "hash": "ea226c249d1d55ae321c475d7144d98e", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/main.py", "fields": [{"name": "APP_LOGGER = _configure_logging()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "configured = os.getenv(\"NEXT_PUBLIC_BACKEND_CORS_ORIGINS\") or os.getenv(\"BACKEND_CORS_ORIGINS\") /", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "configured_list = [o.strip() for o in configured.split(\",\")] if configured else [\"*\"]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "static_dir = os.path.abspath(os.path.join(os.path.dirname(os.path.dirname(__file__)), \"..\", \"sta/", "scope": "", "scopeKind": "", "description": "unavailable"}]}