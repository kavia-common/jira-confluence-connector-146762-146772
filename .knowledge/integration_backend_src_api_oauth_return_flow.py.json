{"is_source_file": true, "format": "Python", "description": "Source code for OAuth return flow handling in a FastAPI-based Atlassian OAuth connector. Implements login initiation and callback handling, including state management, PKCE, session persistence, and redirection logic.", "external_files": ["./oauth_settings.py", "./oauth_pkce.py"], "external_methods": ["get_atlassian_oauth_config", "get_default_scopes", "generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "save_tokens", "get_session"], "published": ["router"], "classes": [{"name": "SessionData", "description": "Data class representing session state, including OAuth state and PKCE verifier."}], "methods": [{"name": "oauth_atlassian_login(request: Request, return_url: Optional[str] = None, scope: Optional[str] = None)", "description": "Initiates the OAuth login flow, generating PKCE, state, storing session info, and redirecting to Atlassian authorization endpoint.", "scope": "", "scopeKind": ""}, {"name": "oauth_atlassian_callback(request: Request, code: Optional[str] = None, state: Optional[str] = None)", "description": "Completes OAuth flow by validating state, exchanging code for tokens, updating session, and redirecting back to the return URL with success/error.", "scope": "", "scopeKind": ""}, {"name": "str _encode_message(message: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool _is_absolute_url(url: str | None)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_atlassian_oauth_config", "get_default_scopes", "generate_code_verifier", "generate_code_challenge", "generate_state", "get_or_create_session_id", "save_session", "save_tokens", "get_session", "httpx.AsyncClient.post", "urllib.parse.urlencode", "urllib.parse.urlparse", "logger.info", "resp.set_cookie", "resp = RedirectResponse"], "search-terms": ["OAuth", "Atlassian", "PKCE", "return_url", "state", "callback", "session management", "authorization", "fastapi"], "state": 2, "file_id": 26, "knowledge_revision": 144, "git_revision": "", "ctags": [{"_type": "tag", "name": "_STATE_RETURN_URL_STORE", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^_STATE_RETURN_URL_STORE: dict[str, str] = {}$/", "language": "Python", "typeref": "typename:dict[str, str]", "kind": "variable"}, {"_type": "tag", "name": "_encode_message", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^def _encode_message(message: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(message: str)"}, {"_type": "tag", "name": "_is_absolute_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^def _is_absolute_url(url: str | None) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(url: str | None)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^logger = logging.getLogger(\"oauth.return\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "oauth_atlassian_callback", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^async def oauth_atlassian_callback(request: Request, code: Optional[str] = None, state: Optional/", "language": "Python", "kind": "function", "signature": "(request: Request, code: Optional[str] = None, state: Optional[str] = None)"}, {"_type": "tag", "name": "oauth_atlassian_login", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^async def oauth_atlassian_login(request: Request, return_url: Optional[str] = None, scope: Optio/", "language": "Python", "kind": "function", "signature": "(request: Request, return_url: Optional[str] = None, scope: Optional[str] = None)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_return_flow.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "247ac0d056125266b983b264ce0a5875", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/oauth_return_flow.py", "fields": [{"name": "dict[str, str] _STATE_RETURN_URL_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(\"oauth.return\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"144": ""}]}