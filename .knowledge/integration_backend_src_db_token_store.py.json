{"is_source_file": true, "format": "Python", "description": "This Python source file implements functions for managing connector tokens in a database, including saving, retrieving, deleting, and handling encryption/decryption of tokens. It interacts with SQLAlchemy models and database sessions.", "external_files": ["src.connectors.base.security", ".models"], "external_methods": ["encrypt_json", "decrypt_json"], "published": ["save_tokens", "get_tokens", "get_token_record", "delete_tokens"], "classes": [], "methods": [{"name": "ConnectorToken save_tokens( db: Session, connector_id: str, tenant_id: str, tokens: Dict[str, Any], scopes: Optional[str] = None, expires_at: Optional[int] = None, metadata: Optional[Dict[str, Any]] = None, )", "description": "Saves or updates tokens for a specific connector and tenant, encrypting the token payload if necessary.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] get_tokens( db: Session, connector_id: str, tenant_id: str )", "description": "Retrieves and decrypts tokens for a specific connector and tenant. Returns None if not found or decryption fails.", "scope": "", "scopeKind": ""}, {"name": "Optional[ConnectorToken] get_token_record( db: Session, connector_id: str, tenant_id: str )", "description": "Returns the raw database record for tokens, including metadata, without decrypting the token payload.", "scope": "", "scopeKind": ""}, {"name": "int delete_tokens(db: Session, connector_id: str, tenant_id: str)", "description": "Deletes stored tokens for a specific connector and tenant, returning the number of rows deleted.", "scope": "", "scopeKind": ""}], "calls": ["encrypt_json", "decrypt_json", "select", "delete", "db.execute", "db.add", "db.commit", "db.refresh"], "search-terms": ["token_store", "ConnectorToken", "encrypt_json", "decrypt_json", "save_tokens", "get_tokens"], "state": 2, "file_id": 23, "knowledge_revision": 140, "git_revision": "", "ctags": [{"_type": "tag", "name": "delete_tokens", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/token_store.py", "pattern": "/^def delete_tokens(db: Session, connector_id: str, tenant_id: str) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "(db: Session, connector_id: str, tenant_id: str)"}, {"_type": "tag", "name": "get_token_record", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/token_store.py", "pattern": "/^def get_token_record($/", "language": "Python", "typeref": "typename:Optional[ConnectorToken]", "kind": "function", "signature": "( db: Session, connector_id: str, tenant_id: str )"}, {"_type": "tag", "name": "get_tokens", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/token_store.py", "pattern": "/^def get_tokens($/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "( db: Session, connector_id: str, tenant_id: str )"}, {"_type": "tag", "name": "save_tokens", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/token_store.py", "pattern": "/^def save_tokens($/", "language": "Python", "typeref": "typename:ConnectorToken", "kind": "function", "signature": "( db: Session, connector_id: str, tenant_id: str, tokens: Dict[str, Any], scopes: Optional[str] = None, expires_at: Optional[int] = None, metadata: Optional[Dict[str, Any]] = None, )"}], "hash": "832588bcb24f9a053a38784b2e11269c", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/db/token_store.py", "revision_history": [{"140": ""}]}