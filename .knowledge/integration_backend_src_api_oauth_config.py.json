{"is_source_file": true, "format": "Python", "description": "This file is a Python module providing OAuth configuration management for Atlassian services (JIRA and Confluence). It loads environment variables, offers functions to retrieve OAuth settings, and includes diagnostic utilities for debugging environment variable resolution. It also handles dotenv environment loading and URL parsing/validation.", "external_files": ["os", "urllib.parse", "pydantic", "dotenv"], "external_methods": ["load_dotenv", "find_dotenv"], "published": ["get_atlassian_base_url", "get_jira_oauth_config", "get_confluence_oauth_config", "get_frontend_base_url_default", "is_jira_oauth_configured", "build_atlassian_authorize_url", "get_jira_oauth_env_debug", "get_env_bootstrap_debug"], "classes": [{"name": "Settings", "description": "A Pydantic model that loads and holds OAuth and related configuration settings from environment variables."}], "methods": [{"name": "None _load_env_once()", "description": "Loads the .env file once at startup for local development environments.", "scope": "", "scopeKind": ""}, {"name": "str _env_first(*names: str)", "description": "Retrieves the first non-empty environment variable value from a list of candidate names.", "scope": "", "scopeKind": ""}, {"name": "str _mask_secret(value: Optional[str], keep: int = 4)", "description": "Masks secrets, revealing only last few characters for security in diagnostics.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Optional[str]] _analyze_url(uri: str)", "description": "Parses a URL to check validity and extract components for debug purposes.", "scope": "", "scopeKind": ""}, {"name": "str _build_public_url(base: str, path: str)", "description": "Constructs an absolute URL from a base URL and path segment.", "scope": "", "scopeKind": ""}, {"name": "str get_atlassian_base_url()", "description": "Returns the Atlassian Cloud base URL from environment.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] get_jira_oauth_config()", "description": "Returns a dictionary with Jira OAuth configuration parameters, resolving environment variables and constructing redirect URL if needed.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] get_confluence_oauth_config()", "description": "Returns a dictionary with Confluence OAuth configuration parameters, similar to Jira's, with fallbacks.", "scope": "", "scopeKind": ""}, {"name": "str get_frontend_base_url_default()", "description": "Provides the default frontend URL for redirects post-auth.", "scope": "", "scopeKind": ""}, {"name": "bool is_jira_oauth_configured()", "description": "Checks if the Jira OAuth configuration has all required fields.", "scope": "", "scopeKind": ""}, {"name": "str build_atlassian_authorize_url(client_id: str, redirect_uri: str, scopes: str, state: Optional[str] = None)", "description": "Builds the OAuth authorization URL for Atlassian OAuth flows.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Dict[str,str]] get_jira_oauth_env_debug()", "description": "Returns diagnostics on environment variable resolution and masking for Jira OAuth params.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] get_env_bootstrap_debug()", "description": "Provides diagnostic info about the dotenv loading status and application environment.", "scope": "", "scopeKind": ""}, {"name": "bool _is_truthy(val: Optional[str | bool])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Tuple[str,Optional[str]] _resolve_env(names: List[str])", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["load_dotenv", "find_dotenv", "os.getenv", "urllib.parse.urlparse", "urllib.parse.urlencode"], "search-terms": ["oauth", "Atlassian", "Jira", "Confluence", "configuration", "environment variables", "dotenv", "get_jira_oauth_config", "build_atlassian_authorize_url", "OAuth 2.0"], "state": 2, "file_id": 12, "knowledge_revision": 116, "git_revision": "18f11961c51752e7368d1a98350549389793c8c4", "revision_history": [{"38": ""}, {"54": "906ba192e73f2ea439ac8fce13c4ec73b18ccf62"}, {"75": "ca3b75ed68bc983a9896690cd6779e00d783a57d"}, {"77": "ca3b75ed68bc983a9896690cd6779e00d783a57d"}, {"82": "c14d893c14cb296cf1c83e9ca7050cbc51dc8f79"}, {"88": "8d546d1b704b9a54444f579c950b9ebe7a1e6fd4"}, {"89": "8d546d1b704b9a54444f579c950b9ebe7a1e6fd4"}, {"92": "cec2a279e42202bd83dda61050ec3367a1d0920b"}, {"93": "cec2a279e42202bd83dda61050ec3367a1d0920b"}, {"110": "18f11961c51752e7368d1a98350549389793c8c4"}, {"114": "18f11961c51752e7368d1a98350549389793c8c4"}, {"115": "18f11961c51752e7368d1a98350549389793c8c4"}, {"116": "18f11961c51752e7368d1a98350549389793c8c4"}], "ctags": [{"_type": "tag", "name": "ATLASSIAN_BASE_ENV_CANDIDATES", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^ATLASSIAN_BASE_ENV_CANDIDATES: List[str] = [$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable"}, {"_type": "tag", "name": "FRONTEND_URL_ENV_CANDIDATES", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^FRONTEND_URL_ENV_CANDIDATES: List[str] = [$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable"}, {"_type": "tag", "name": "JIRA_ID_ENV_CANDIDATES", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^JIRA_ID_ENV_CANDIDATES: List[str] = [$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable"}, {"_type": "tag", "name": "JIRA_REDIRECT_ENV_CANDIDATES", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^JIRA_REDIRECT_ENV_CANDIDATES: List[str] = [$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable"}, {"_type": "tag", "name": "JIRA_SECRET_ENV_CANDIDATES", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^JIRA_SECRET_ENV_CANDIDATES: List[str] = [$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable"}, {"_type": "tag", "name": "PUBLIC_BASE_URL_ENV_CANDIDATES", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^PUBLIC_BASE_URL_ENV_CANDIDATES: List[str] = [$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable"}, {"_type": "tag", "name": "Settings", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^class Settings(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_DOTENV_STATUS", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^_DOTENV_STATUS: Dict[str, Optional[str]] = {\"loaded\": \"false\", \"path\": None}$/", "language": "Python", "typeref": "typename:Dict[str, Optional[str]]", "kind": "variable"}, {"_type": "tag", "name": "_SETTINGS", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^_SETTINGS = Settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_analyze_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _analyze_url(uri: str) -> Dict[str, Optional[str]]:$/", "language": "Python", "typeref": "typename:Dict[str,Optional[str]]", "kind": "function", "signature": "(uri: str)"}, {"_type": "tag", "name": "_build_public_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _build_public_url(base: str, path: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(base: str, path: str)"}, {"_type": "tag", "name": "_env_first", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _env_first(*names: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(*names: str)"}, {"_type": "tag", "name": "_is_truthy", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _is_truthy(val: Optional[str | bool]) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(val: Optional[str | bool])"}, {"_type": "tag", "name": "_load_env_once", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _load_env_once() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_mask_secret", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _mask_secret(value: Optional[str], keep: int = 4) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(value: Optional[str], keep: int = 4)"}, {"_type": "tag", "name": "_resolve_env", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def _resolve_env(names: List[str]) -> Tuple[str, Optional[str]]:$/", "language": "Python", "typeref": "typename:Tuple[str,Optional[str]]", "kind": "function", "signature": "(names: List[str])"}, {"_type": "tag", "name": "app_env", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    app_env: str = Field(default=os.getenv(\"APP_ENV\", os.getenv(\"ENV\", \"production\")))$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "atlassian_base_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    atlassian_base_url: Optional[str] = Field(default=_env_first(\"ATLASSIAN_CLOUD_BASE_URL\", \"NE/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "backend_cors_origins", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    backend_cors_origins: str = Field(default=os.getenv(\"BACKEND_CORS_ORIGINS\", os.getenv(\"NEXT_/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "build_atlassian_authorize_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def build_atlassian_authorize_url(client_id: str, redirect_uri: str, scopes: str, state: Optiona/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(client_id: str, redirect_uri: str, scopes: str, state: Optional[str] = None)"}, {"_type": "tag", "name": "confluence_client_id", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    confluence_client_id: Optional[str] = Field(default=_env_first(\"CONFLUENCE_OAUTH_CLIENT_ID\",/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "confluence_client_secret", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    confluence_client_secret: Optional[str] = Field(default=_env_first(\"CONFLUENCE_OAUTH_CLIENT_/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "confluence_redirect_uri", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    confluence_redirect_uri: Optional[str] = Field(default=_env_first(\"CONFLUENCE_OAUTH_REDIRECT/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "dev_mode", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    dev_mode: bool = Field(default=os.getenv(\"DEV_MODE\", \"false\").lower() in (\"1\", \"true\", \"yes\"/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "find_dotenv", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    find_dotenv = None  # type: ignore$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "frontend_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    frontend_url: Optional[str] = Field(default=_env_first(\"APP_FRONTEND_URL\", \"NEXT_PUBLIC_APP_/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "get_atlassian_base_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def get_atlassian_base_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_confluence_oauth_config", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def get_confluence_oauth_config() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_env_bootstrap_debug", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def get_env_bootstrap_debug() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_frontend_base_url_default", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def get_frontend_base_url_default() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_jira_oauth_config", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def get_jira_oauth_config() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_jira_oauth_env_debug", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def get_jira_oauth_env_debug() -> Dict[str, Dict[str, str]]:$/", "language": "Python", "typeref": "typename:Dict[str,Dict[str,str]]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "is_jira_oauth_configured", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^def is_jira_oauth_configured() -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "jira_client_id", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    jira_client_id: Optional[str] = Field(default=_env_first(\"JIRA_OAUTH_CLIENT_ID\", \"ATLASSIAN_/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "jira_client_secret", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    jira_client_secret: Optional[str] = Field(default=_env_first(\"JIRA_OAUTH_CLIENT_SECRET\", \"AT/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "jira_redirect_uri", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    jira_redirect_uri: Optional[str] = Field(default=_env_first(\"JIRA_OAUTH_REDIRECT_URI\", \"ATLA/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "load_dotenv", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    load_dotenv = None  # type: ignore$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "log_level", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    log_level: str = Field(default=os.getenv(\"LOG_LEVEL\", \"INFO\"))$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Settings", "scopeKind": "class"}, {"_type": "tag", "name": "public_base_url", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/api/oauth_config.py", "pattern": "/^    public_base_url: Optional[str] = Field(default=_env_first(*PUBLIC_BASE_URL_ENV_CANDIDATES))$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Settings", "scopeKind": "class"}], "hash": "5917228bf683999b13a48293e829d79b", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/api/oauth_config.py", "fields": [{"name": "List[str] ATLASSIAN_BASE_ENV_CANDIDATES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] FRONTEND_URL_ENV_CANDIDATES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] JIRA_ID_ENV_CANDIDATES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] JIRA_REDIRECT_ENV_CANDIDATES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] JIRA_SECRET_ENV_CANDIDATES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[str] PUBLIC_BASE_URL_ENV_CANDIDATES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Optional[str]] _DOTENV_STATUS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_SETTINGS = Settings()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str app_env", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] atlassian_base_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "str backend_cors_origins", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] confluence_client_id", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] confluence_client_secret", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] confluence_redirect_uri", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "bool dev_mode", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "find_dotenv = None  # type: ignore", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] frontend_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] jira_client_id", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] jira_client_secret", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] jira_redirect_uri", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "load_dotenv = None  # type: ignore", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str log_level", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] public_base_url", "scope": "Settings", "scopeKind": "class", "description": "unavailable"}]}