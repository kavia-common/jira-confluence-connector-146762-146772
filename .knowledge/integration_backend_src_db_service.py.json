{"is_source_file": true, "format": "Python", "description": "This is a service layer module implementing database operations related to users, Jira projects, and Confluence pages, including creation, retrieval, and listing functions.", "external_files": ["sqlalchemy.orm", "sqlalchemy"], "external_methods": ["sqlalchemy.orm.select", "sqlalchemy.orm.Session.execute", "sqlalchemy.orm.Session.get", "sqlalchemy.orm.Session.add", "sqlalchemy.orm.Session.commit", "sqlalchemy.orm.Session.refresh", "sqlalchemy.select"], "published": ["create_user", "get_user_by_id", "get_user_by_email", "list_users", "upsert_jira_project", "list_jira_projects_for_user", "upsert_confluence_page", "list_confluence_pages_for_user"], "classes": [], "methods": [{"name": "User create_user(db: Session, *, email: str, display_name: Optional[str] = None, jira_token: Optional[str] = None, confluence_token: Optional[str] = None, jira_base_url: Optional[str] = None, confluence_base_url: Optional[str] = None)", "description": "Creates a new user in the database or returns an existing user with the same email, ensuring idempotency.", "scope": "", "scopeKind": ""}, {"name": "Optional[User] get_user_by_id(db: Session, user_id: int)", "description": "Retrieves a user by their unique ID.", "scope": "", "scopeKind": ""}, {"name": "Optional[User] get_user_by_email(db: Session, email: str)", "description": "Retrieves a user by their email address if they exist.", "scope": "", "scopeKind": ""}, {"name": "List[User] list_users(db: Session)", "description": "Lists all users sorted by ID in descending order.", "scope": "", "scopeKind": ""}, {"name": "JiraProject upsert_jira_project(db: Session, *, owner_id: int, key: str, name: str, lead: Optional[str] = None, url: Optional[str] = None)", "description": "Creates or updates a Jira project associated with a user, identified by owner_id and key.", "scope": "", "scopeKind": ""}, {"name": "List[JiraProject] list_jira_projects_for_user(db: Session, owner_id: int)", "description": "Lists all Jira projects belonging to a specific user.", "scope": "", "scopeKind": ""}, {"name": "ConfluencePage upsert_confluence_page(db: Session, *, owner_id: int, space_key: str, page_id: str, title: str, url: Optional[str] = None)", "description": "Creates or updates a Confluence page associated with a user, identified by owner_id, space_key, and page_id.", "scope": "", "scopeKind": ""}, {"name": "List[ConfluencePage] list_confluence_pages_for_user(db: Session, owner_id: int)", "description": "Lists all Confluence pages belonging to a specific user.", "scope": "", "scopeKind": ""}], "calls": ["db.execute", "db.get", "db.add", "db.commit", "db.refresh", "select(User).where(User.email == email)", "select(JiraProject).where(JiraProject.owner_id == owner_id, JiraProject.key == key)", "select(ConfluencePage).where(ConfluencePage.owner_id == owner_id, ConfluencePage.space_key == space_key, ConfluencePage.page_id == page_id)"], "search-terms": ["db operations", "Jira project management", "Confluence page management", "User database functions", "Database service layer", "SQLAlchemy database interactions"], "state": 2, "file_id": 8, "knowledge_revision": 168, "git_revision": "d17636374379257ba72b67228f5085372200c751", "revision_history": [{"17": ""}, {"168": "d17636374379257ba72b67228f5085372200c751"}], "ctags": [{"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def create_user(db: Session, *, email: str, display_name: Optional[str] = None,$/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(db: Session, *, email: str, display_name: Optional[str] = None, jira_token: Optional[str] = None, confluence_token: Optional[str] = None, jira_base_url: Optional[str] = None, confluence_base_url: Optional[str] = None)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def get_user_by_email(db: Session, email: str) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "get_user_by_id", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def get_user_by_id(db: Session, user_id: int) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, user_id: int)"}, {"_type": "tag", "name": "list_confluence_pages_for_user", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def list_confluence_pages_for_user(db: Session, owner_id: int) -> List[ConfluencePage]:$/", "language": "Python", "typeref": "typename:List[ConfluencePage]", "kind": "function", "signature": "(db: Session, owner_id: int)"}, {"_type": "tag", "name": "list_jira_projects_for_user", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def list_jira_projects_for_user(db: Session, owner_id: int) -> List[JiraProject]:$/", "language": "Python", "typeref": "typename:List[JiraProject]", "kind": "function", "signature": "(db: Session, owner_id: int)"}, {"_type": "tag", "name": "list_users", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def list_users(db: Session) -> List[User]:$/", "language": "Python", "typeref": "typename:List[User]", "kind": "function", "signature": "(db: Session)"}, {"_type": "tag", "name": "upsert_confluence_page", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def upsert_confluence_page(db: Session, *, owner_id: int, space_key: str, page_id: str,$/", "language": "Python", "typeref": "typename:ConfluencePage", "kind": "function", "signature": "(db: Session, *, owner_id: int, space_key: str, page_id: str, title: str, url: Optional[str] = None)"}, {"_type": "tag", "name": "upsert_jira_project", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/db/service.py", "pattern": "/^def upsert_jira_project(db: Session, *, owner_id: int, key: str, name: str,$/", "language": "Python", "typeref": "typename:JiraProject", "kind": "function", "signature": "(db: Session, *, owner_id: int, key: str, name: str, lead: Optional[str] = None, url: Optional[str] = None)"}], "hash": "7519fa6d7b2802395c154ce1f4726825", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/db/service.py"}