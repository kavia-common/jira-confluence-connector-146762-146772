{"is_source_file": true, "format": "Python", "description": "This file contains a Python source module for a Jira REST API client. It implements classes for authentication handling, error management, and various methods to interact with Jira, such as listing projects, searching issues, and creating issues. The code manages token refresh, handles API responses, and provides abstractions for making authenticated requests to Jira.", "external_files": ["requests", "os", "time", "logging"], "external_methods": ["requests.post", "requests.get", "requests.RequestException", "requests.Response.json", "logging.getLogger", "os.getenv", "time.time"], "published": ["JiraClient", "JiraAuth", "JiraClientError", "JIRA_API_ROOT"], "classes": [{"name": "JiraClientError", "description": "Custom exception class for handling Jira client errors, with additional attributes for HTTP status and retry logic."}, {"name": "JiraAuth", "description": "Data class holding authentication credentials, tokens, expiry, and optional base URL or PAT for Jira API requests."}, {"name": "JiraClient", "description": "Main class providing methods to interact with Jira's REST API, including project listing, issue searching, and issue creation, with token refresh and error handling."}], "methods": [{"name": "Dict[str,str] _headers(self)", "description": "Constructs HTTP headers with authorization tokens.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "bool refresh_token_if_needed(self, skew: int = 120)", "description": "Checks if the OAuth token needs to be refreshed based on expiry, and refreshes if necessary.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "bool try_refresh_on_unauthorized(self)", "description": "Attempts to refresh the token if an unauthorized response is received.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "bool _refresh(self)", "description": "Performs the OAuth token refresh flow by calling Atlassian's OAuth endpoint.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "Dict[str,Any] _handle_response(self, resp: requests.Response)", "description": "Processes HTTP responses, handling errors, JSON parsing, and return of data.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "Optional[str] _cloud_id(self)", "description": "Resolves the cloud ID, necessary for API endpoints, via accessible-resources API.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "Dict[str,Any] list_projects(self, limit: int = 25, cursor: Optional[str] = None)", "description": "Lists Jira projects with pagination support.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "List[Dict[str,Any]] search(self, q: str, limit: int = 10, filters: Optional[Dict[str, Any]] = None)", "description": "Performs a Jira JQL search and normalizes results.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "Dict[str,Any] create(self, payload: Dict[str, Any])", "description": "Creates a Jira issue using provided payload.", "scope": "JiraClient", "scopeKind": "class"}, {"name": "__init__( self, access_token: Optional[str], refresh_token: Optional[str], expires_at: Optional[int], base_url: Optional[str] = None, pat: Optional[str] = None, )", "scope": "JiraAuth", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, auth: JiraAuth, enable_pkce: bool = False, timeout: int = 20)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, message: str, status: Optional[int] = None, retry_after: Optional[int] = None)", "scope": "JiraClientError", "scopeKind": "class", "description": "unavailable"}], "calls": ["requests.post", "requests.get", "requests.Response.json", "requests.RequestException", "time.time", "os.getenv"], "search-terms": ["JiraClient", "OAuth token refresh", "list_projects", "search issues", "create issue", "accessible-resources API", "Jira API", "REST client"], "state": 2, "file_id": 37, "knowledge_revision": 345, "git_revision": "98c6b59c7482973cee0153f948eb6d1b34db4a07", "revision_history": [{"320": ""}, {"332": "98c6b59c7482973cee0153f948eb6d1b34db4a07"}, {"345": "98c6b59c7482973cee0153f948eb6d1b34db4a07"}], "ctags": [{"_type": "tag", "name": "JIRA_API_ROOT", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^JIRA_API_ROOT = \"https:\\/\\/api.atlassian.com\\/ex\\/jira\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JiraAuth", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^class JiraAuth:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JiraClient", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^class JiraClient:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JiraClientError", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^class JiraClientError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def __init__($/", "language": "Python", "kind": "member", "signature": "( self, access_token: Optional[str], refresh_token: Optional[str], expires_at: Optional[int], base_url: Optional[str] = None, pat: Optional[str] = None, )", "scope": "JiraAuth", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def __init__(self, auth: JiraAuth, enable_pkce: bool = False, timeout: int = 20):$/", "language": "Python", "kind": "member", "signature": "(self, auth: JiraAuth, enable_pkce: bool = False, timeout: int = 20)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def __init__(self, message: str, status: Optional[int] = None, retry_after: Optional[int] = /", "language": "Python", "kind": "member", "signature": "(self, message: str, status: Optional[int] = None, retry_after: Optional[int] = None)", "scope": "JiraClientError", "scopeKind": "class"}, {"_type": "tag", "name": "_cloud_id", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def _cloud_id(self) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_handle_response", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def _handle_response(self, resp: requests.Response) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, resp: requests.Response)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_headers", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def _headers(self) -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_refresh", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def _refresh(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def create(self, payload: Dict[str, Any]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, payload: Dict[str, Any])", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "list_projects", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def list_projects(self, limit: int = 25, cursor: Optional[str] = None) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, limit: int = 25, cursor: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "refresh_token_if_needed", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def refresh_token_if_needed(self, skew: int = 120) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, skew: int = 120)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def search(self, q: str, limit: int = 10, filters: Optional[Dict[str, Any]] = None) -> List[/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, q: str, limit: int = 10, filters: Optional[Dict[str, Any]] = None)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "try_refresh_on_unauthorized", "path": "/home/kavia/workspace/code-generation/jira-confluence-connector-146762-146772/integration_backend/src/connectors/jira/client.py", "pattern": "/^    def try_refresh_on_unauthorized(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}], "hash": "2c6ae1d3fd836bb0b726e54b54baee33", "format-version": 4, "code-base-name": "integration_backend", "filename": "integration_backend/src/connectors/jira/client.py", "fields": [{"name": "JIRA_API_ROOT = \"https:\\/\\/api.atlassian.com\\/ex\\/jira\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}]}