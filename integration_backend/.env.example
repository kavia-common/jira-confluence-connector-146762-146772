# Backend environment example for Atlassian OAuth (PKCE) and demo DB

# Public URLs (recommended for cloud previews)
# IMPORTANT: BACKEND_PUBLIC_BASE_URL/BASE_URL MUST BE ORIGIN-ONLY (no path such as '/docs')
# Allowed:  https://your-backend.example.com[:port]
# Wrong:    https://your-backend.example.com:3001/docs
BACKEND_PUBLIC_BASE_URL=https://your-backend.example.com
# BACKEND_BASE_URL is supported as a legacy alias
BACKEND_BASE_URL=
FRONTEND_BASE_URL=https://your-frontend.example.com

# CORS (comma-separated origins). Include your frontend origin.
BACKEND_CORS_ORIGINS=https://your-frontend.example.com

# Atlassian OAuth (PKCE)
ATLASSIAN_CLIENT_ID=your_atlassian_client_id
# ATLASSIAN_CLIENT_SECRET is optional for PKCE-only apps; include if configured in your Atlassian app.
ATLASSIAN_CLIENT_SECRET=
# Must exactly match the redirect URI set in Atlassian Developer Console.
# If BACKEND_PUBLIC_BASE_URL is set, the backend will compute:
#   ATLASSIAN_REDIRECT_URI = {BACKEND_PUBLIC_BASE_URL}/api/oauth/atlassian/callback
ATLASSIAN_REDIRECT_URI=https://your-backend.example.com/api/oauth/atlassian/callback
# Optional scopes override; if empty, backend uses a sensible default set.
ATLASSIAN_SCOPES=read:jira-work read:jira-user read:confluence-content.all read:confluence-space.summary offline_access

# Jira legacy (non-PKCE) shims
JIRA_OAUTH_CLIENT_ID=
JIRA_OAUTH_CLIENT_SECRET=
JIRA_OAUTH_REDIRECT_URI=https://your-backend.example.com/auth/jira/callback

# Optional: Atlassian cloud site base (used elsewhere)
ATLASSIAN_CLOUD_BASE_URL=https://your-team.atlassian.net

# Demo DB (SQLite default if not set)
INTEGRATION_DB_URL=sqlite:///./integration.db

# Redis (optional, recommended for OAuth state)
# When set, OAuth state is stored in Redis with TTL to survive restarts and multi-instance routing.
# Use origin-only backend base; Redis URL example below assumes local dev.
REDIS_URL=redis://localhost:6379
# TTL for OAuth state (seconds). Default is 600 (10 minutes)
OAUTH_STATE_TTL_SECONDS=600

# Logging
LOG_LEVEL=INFO
